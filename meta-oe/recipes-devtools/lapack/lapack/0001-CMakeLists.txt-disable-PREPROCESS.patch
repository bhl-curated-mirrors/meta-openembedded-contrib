From a3f78dc61381f1454ad47bec0fe57a334900bb45 Mon Sep 17 00:00:00 2001
From: Martin Jansa <martin.jansa@gmail.com>
Date: Tue, 21 Jan 2025 15:03:20 +0000
Subject: [PATCH] CMakeLists.txt: disable PREPROCESS

Upstream-Status: Pending

Signed-off-by: Martin Jansa <martin.jansa@gmail.com>
---
 CBLAS/src/CMakeLists.txt      | 2 +-
 SRC/CMakeLists.txt            | 8 ++++----
 TESTING/MATGEN/CMakeLists.txt | 4 ++--
 3 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/CBLAS/src/CMakeLists.txt b/CBLAS/src/CMakeLists.txt
index 8dcb2f293..760a40095 100644
--- a/CBLAS/src/CMakeLists.txt
+++ b/CBLAS/src/CMakeLists.txt
@@ -142,7 +142,7 @@ if(BUILD_INDEX64_EXT_API)
   add_library(${CBLASLIB}_64_fobj OBJECT ${SOURCES_64_F})
   set_target_properties(${CBLASLIB}_64_cobj ${CBLASLIB}_64_fobj PROPERTIES
           POSITION_INDEPENDENT_CODE ON
-          Fortran_PREPROCESS ON
+          Fortran_PREPROCESS OFF
           LINKER_LANGUAGE C)
   target_compile_options(${CBLASLIB}_64_cobj PRIVATE -DWeirdNEC -DCBLAS_API64)
   target_compile_options(${CBLASLIB}_64_fobj PRIVATE ${FOPT_ILP64})
diff --git a/SRC/CMakeLists.txt b/SRC/CMakeLists.txt
index be426cecd..b5998dd34 100644
--- a/SRC/CMakeLists.txt
+++ b/SRC/CMakeLists.txt
@@ -523,7 +523,7 @@ add_library(mod_files OBJECT ${ALLMOD})
 set_target_properties(
   mod_files PROPERTIES
   POSITION_INDEPENDENT_CODE ON
-  Fortran_PREPROCESS ON
+  Fortran_PREPROCESS OFF
   )
 
 add_library(${LAPACKLIB}_obj OBJECT ${SOURCES})
@@ -531,7 +531,7 @@ target_link_libraries(${LAPACKLIB}_obj mod_files)
 set_target_properties(
   ${LAPACKLIB}_obj PROPERTIES
   POSITION_INDEPENDENT_CODE ON
-  Fortran_PREPROCESS ON
+  Fortran_PREPROCESS OFF
   )
 
 if(BUILD_INDEX64_EXT_API)
@@ -560,7 +560,7 @@ if(BUILD_INDEX64_EXT_API)
     set_target_properties(
       ${LAPACKLIB}_64_obj PROPERTIES
       POSITION_INDEPENDENT_CODE ON
-      Fortran_PREPROCESS ON
+      Fortran_PREPROCESS OFF
     )
   endif()
 endif()
diff --git a/TESTING/MATGEN/CMakeLists.txt b/TESTING/MATGEN/CMakeLists.txt
index 02e05a86d..c9be4c643 100644
--- a/TESTING/MATGEN/CMakeLists.txt
+++ b/TESTING/MATGEN/CMakeLists.txt
@@ -51,7 +51,7 @@ add_library(${TMGLIB}_obj OBJECT ${SOURCES})
 set_target_properties(
   ${TMGLIB}_obj PROPERTIES
   POSITION_INDEPENDENT_CODE ON
-  Fortran_PREPROCESS ON
+  Fortran_PREPROCESS OFF
   )
 
 if(BUILD_INDEX64_EXT_API)
@@ -78,7 +78,7 @@ if(BUILD_INDEX64_EXT_API)
     set_target_properties(
     ${TMGLIB}_64_obj PROPERTIES
     POSITION_INDEPENDENT_CODE ON
-    Fortran_PREPROCESS ON
+    Fortran_PREPROCESS OFF
   )
   endif()
 endif()
